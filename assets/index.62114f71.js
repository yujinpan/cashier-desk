var i=Object.defineProperty;var d=(r,e,t)=>e in r?i(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var a=(r,e,t)=>(d(r,typeof e!="symbol"?e+"":e,t),t);import{V as c,s as f,p as m,C as _,n as h}from"./index.85bb56ed.js";import{d as y,u as b,a as v,g as C}from"./menu.5afae388.js";import{D as l}from"./dictionary.fbd0cb7a.js";var F=Object.defineProperty,g=Object.getOwnPropertyDescriptor,M=(r,e,t,u)=>{for(var s=u>1?void 0:u?g(e,t):e,n=r.length-1,p;n>=0;n--)(p=r[n])&&(s=(u?p(e,t,s):p(s))||s);return u&&s&&F(e,t,s),s};let o=class extends c{constructor(){super(...arguments);a(this,"columns",[{label:"\u5E8F\u53F7",prop:"order",width:"80px"},{prop:"type",label:"\u7C7B\u578B",dictionary:l.get("menu_type"),type:"tag",tagType:e=>e==="\u8364\u83DC"?"primary":"success"},{prop:"name",label:"\u540D\u79F0"},{prop:"price",label:"\u4EF7\u683C(\u5143)"},{type:"handle",label:"\u64CD\u4F5C",width:"260px",handleButtons:[{label:"\u7F16\u8F91",text:!1,type:"primary",handler:this.updateMenu},{label:"\u5220\u9664",text:!1,type:"warning",handler:e=>this.$confirm("\u786E\u8BA4\u5220\u9664\u5417\uFF1F").then(()=>y(e.id).then(()=>{this.handleSuccess()}))}]}]);a(this,"filterField",[{prop:"type",type:"radio_button",label:"\u7C7B\u578B",options:[{value:"",label:"\u5168\u90E8"},...l.getSync("menu_type")]}]);a(this,"filterParams",{type:"",name:""})}handleSuccess(){f("\u64CD\u4F5C\u6210\u529F","success"),this.refresh()}refresh(){this.$refs.CMList.getList()}updateMenu(e={}){return m(this.$createElement,{model:{...e},fields:[{label:"\u7C7B\u578B",prop:"type",type:"radio_button",options:l.get("menu_type"),rules:["required"],value:l.getSync("menu_type")[0].value},{label:"\u540D\u79F0",prop:"name",rules:["required"]},{label:"\u4EF7\u683C(\u5143)",prop:"price",rules:["required","number"],number:!0}],submit:t=>(t.id?b:v)(t).then(()=>{this.handleSuccess()})})}getListMethod(){return C(this.filterParams).then(e=>({total:e.length,data:e.map((t,u)=>({order:u+1,...t}))}))}};o=M([_],o);var x=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("CMList",{ref:"CMList",staticClass:"menu",attrs:{"get-list-method":e.getListMethod,columns:e.columns,"filter-fields":e.filterField,"filter-params":e.filterParams,pagination:!1,"table-props":{order:!1,showOverflowTooltip:!1},"filter-realtime":""},scopedSlots:e._u([{key:"header",fn:function(){return[t("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(u){return e.updateMenu()}}},[e._v("\u521B\u5EFA")])]},proxy:!0}])})},D=[],B=h(o,x,D,!1,null,"b1aceb74",null,null);const S=B.exports;export{S as default};
